<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
      background-color: #f5f5f5;
    }
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }
    .header h1 {
      margin: 0;
      font-size: 28px;
      font-weight: 600;
    }
    .header p {
      margin: 10px 0 0 0;
      opacity: 0.9;
      font-size: 14px;
    }
    .summary-bar {
      display: flex;
      justify-content: space-around;
      background: #f8f9fa;
      padding: 20px;
      border-bottom: 1px solid #e0e0e0;
    }
    .summary-item {
      text-align: center;
    }
    .summary-item .label {
      font-size: 12px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 5px;
    }
    .summary-item .value {
      font-size: 24px;
      font-weight: 700;
      color: #667eea;
    }
    .content {
      padding: 30px;
      max-width: 700px;
      margin: 0 auto;
    }
    .signal-card {
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      transition: border-color 0.2s;
    }
    .signal-card:hover {
      border-color: #667eea;
    }
    .signal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding-bottom: 15px;
      border-bottom: 2px solid #f0f0f0;
    }
    .ticker {
      font-size: 24px;
      font-weight: 700;
      color: #667eea;
      margin: 0;
    }
    .rank-badge {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
    }
    .badges-row {
      display: flex;
      gap: 8px;
      margin: 10px 0;
      flex-wrap: wrap;
    }
    .badge {
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
    }
    .badge-sector {
      background: #e3f2fd;
      color: #1976d2;
    }
    .badge-quality {
      background: #f3e5f5;
      color: #7b1fa2;
    }
    .badge-pattern {
      background: #fff3e0;
      color: #e65100;
    }
    .badge-news {
      background: #e8f5e9;
      color: #2e7d32;
    }
    .signal-metrics {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin: 15px 0;
    }
    .metric {
      background: #f8f9fa;
      padding: 12px;
      border-radius: 5px;
    }
    .metric-label {
      font-size: 11px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 5px;
    }
    .metric-value {
      font-size: 18px;
      font-weight: 600;
      color: #333;
    }
    .insiders-section {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 12px;
      border-radius: 5px;
      margin: 15px 0;
    }
    .insiders-section .label {
      font-size: 12px;
      color: #856404;
      font-weight: 600;
      margin-bottom: 5px;
    }
    .insiders-section .names {
      color: #856404;
      font-size: 14px;
    }
    .action-box {
      background: #e3f2fd;
      border-left: 4px solid #2196f3;
      padding: 15px;
      border-radius: 5px;
      margin: 15px 0;
    }
    .action-box .label {
      font-size: 12px;
      color: #1565c0;
      font-weight: 600;
      text-transform: uppercase;
      margin-bottom: 5px;
    }
    .action-box .text {
      color: #1565c0;
      font-size: 14px;
      font-weight: 500;
    }
    .rationale {
      background: #f8f9fa;
      padding: 12px;
      border-radius: 5px;
      font-size: 13px;
      color: #555;
      margin-top: 10px;
    }
    .price-info {
      display: flex;
      gap: 20px;
      margin: 10px 0;
      flex-wrap: wrap;
    }
    .price-item {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .price-item .icon {
      font-size: 16px;
    }
    .price-item .text {
      font-size: 13px;
      color: #666;
    }
    .price-item .value {
      font-weight: 600;
      color: #333;
    }
    .footer {
      background: #f8f9fa;
      padding: 20px;
      text-align: center;
      color: #666;
      font-size: 12px;
      border-top: 1px solid #e0e0e0;
    }
    .footer p {
      margin: 5px 0;
    }
    .divider {
      height: 1px;
      background: #e0e0e0;
      margin: 30px 0;
    }
  </style>
</head>
<body>
  <!-- Main Container -->
  <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background: white;">
    
    <!-- Header -->
    <tr>
      <td style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; text-align: center; color: white;">
        <h1 style="margin: 0; font-size: 28px; font-weight: 600;">üìà Daily Insider Trade Report</h1>
        <p style="margin: 10px 0 0 0; opacity: 0.9; font-size: 14px;">{{ date }}</p>
      </td>
    </tr>

    <!-- Summary Bar -->
    <tr>
      <td style="background: #f8f9fa; padding: 20px; border-bottom: 1px solid #e0e0e0;">
        <table width="100%" cellpadding="0" cellspacing="0" border="0">
          <tr>
            <td width="33%" align="center">
              <div style="font-size: 12px; color: #666; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 5px;">Signals</div>
              <div style="font-size: 24px; font-weight: 700; color: #667eea;">{{ trades|length }}</div>
            </td>
            <td width="33%" align="center">
              <div style="font-size: 12px; color: #666; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 5px;">Total Value</div>
              <div style="font-size: 24px; font-weight: 700; color: #667eea;">
                {% set total_val = trades|sum(attribute='total_value') %}
                {% if total_val >= 1_000_000_000 %}
                  ${{ "{:.2f}".format(total_val / 1_000_000_000) }}B
                {% elif total_val >= 1_000_000 %}
                  ${{ "{:.1f}".format(total_val / 1_000_000) }}M
                {% elif total_val >= 1_000 %}
                  ${{ "{:.1f}".format(total_val / 1_000) }}K
                {% else %}
                  ${{ "{:,.0f}".format(total_val) }}
                {% endif %}
              </div>
            </td>
            <td width="33%" align="center">
              <div style="font-size: 12px; color: #666; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 5px;">Avg Score</div>
              <div style="font-size: 24px; font-weight: 700; color: #667eea;">{{ (trades|sum(attribute='rank_score')/trades|length)|round(1) }}</div>
            </td>
          </tr>
        </table>
      </td>
    </tr>

    <!-- Content -->
    <tr>
      <td style="padding: 30px;">
        {% for item in trades %}
        <!-- Signal Card -->
        <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background: white; border: 2px solid #e0e0e0; border-radius: 8px; margin-bottom: 20px;">
          <tr>
            <td style="padding: 20px;">
              
              <!-- Signal Header -->
              <table width="100%" cellpadding="0" cellspacing="0" border="0" style="border-bottom: 2px solid #f0f0f0; padding-bottom: 15px; margin-bottom: 15px;">
                <tr>
                  <td align="left" width="60%">
                    <h2 style="margin: 0; font-size: 24px; font-weight: 700; color: #667eea;">
                      {{ item.ticker }}{% if item.company and item.company != item.ticker %} - <span style="font-weight: 500; color: #666;">{{ item.company }}</span>{% endif %}
                    </h2>
                  </td>
                  <td align="right" width="40%">
                    <span style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: 600; white-space: nowrap; display: inline-block;">Score: {{ item.rank_score|round(2) }}</span>
                  </td>
                </tr>
              </table>

              <!-- Enhanced Badges -->
              <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 10px 0;">
                <tr>
                  <td>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                      {% if item.multi_signal_tier and item.multi_signal_tier == 'tier1' %}
                      <span style="background: #dc2626; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; display: inline-block;" title="Three or more confirming signals detected: Insider + Politician + 13F Holdings">üî• TIER 1 (3+ SIGNALS)</span>
                      {% elif item.multi_signal_tier and item.multi_signal_tier == 'tier2' %}
                      <span style="background: #fef3c7; color: #92400e; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; display: inline-block;" title="Two confirming signals detected: Insider Buying + Politician Trading OR Insider Buying + 13F Holdings">‚ö° TIER 2 (2 SIGNALS)</span>
                      {% endif %}

                      {% if item.has_politician_signal %}
                      <span style="background: #8b5cf6; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; display: inline-block;" title="Confirmed by recent politician trading activity">üèõÔ∏è POLITICIAN</span>
                      {% endif %}

                      {% if item.sector and item.sector != 'Unknown' %}
                      <span style="background: #e3f2fd; color: #1976d2; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; display: inline-block;">üè¢ {{ item.sector }}</span>
                      {% endif %}

                      {% if item.quality_score and item.quality_score > 0 %}
                      <span style="background: #f3e5f5; color: #7b1fa2; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; display: inline-block;">‚≠ê Quality: {{ item.quality_score|round(1) }}/10</span>
                      {% endif %}

                      {% if item.pattern_detected and item.pattern_detected not in ['None', '', none] %}
                      <span style="background: #fff3e0; color: #e65100; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; display: inline-block;">üîç {{ item.pattern_detected }}</span>
                      {% endif %}

                      {% if item.sentiment_display and item.sentiment_display != '' and item.news_sentiment not in ['UNKNOWN', 'none', '', none] %}
                      <span style="background: #e8f5e9; color: #2e7d32; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; display: inline-block;">üì∞ {{ item.sentiment_display }} News</span>
                      {% endif %}

                      {% if item.pct_of_float and item.pct_of_float >= 0.01 %}
                        {% if item.pct_of_float >= 1.0 %}
                      <span style="background: #ffebee; color: #c62828; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; display: inline-block;">üî• {{ "{:.2f}".format(item.pct_of_float) }}% of Float!</span>
                        {% elif item.pct_of_float >= 0.1 %}
                      <span style="background: #fff3e0; color: #e65100; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; display: inline-block;">‚ö° {{ "{:.3f}".format(item.pct_of_float) }}% of Float</span>
                        {% endif %}
                      {% endif %}

                      {% if item.squeeze_potential %}
                      <span style="background: #ff5722; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; display: inline-block;" title="High squeeze potential detected">üöÄ SQUEEZE SETUP ({{ item.squeeze_score|round(0) }}/100)</span>
                      {% elif item.short_interest_available and item.short_percent_float and item.short_percent_float >= 0.20 %}
                      <span style="background: #fce4ec; color: #c2185b; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; display: inline-block;" title="High short interest detected">üìä Short: {{ item.short_percent_float_display }}</span>
                      {% endif %}
                    </div>
                  </td>
                </tr>
              </table>

              <!-- Multi-Signal Details Section -->
              {% if item.multi_signal_tier and item.multi_signal_tier in ['tier1', 'tier2'] %}
              <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background: #fef3c7; border-left: 4px solid #f59e0b; border-radius: 5px; margin: 15px 0;">
                <tr>
                  <td style="padding: 12px;">
                    <div style="font-size: 12px; color: #92400e; font-weight: 600; margin-bottom: 8px;">
                      {% if item.multi_signal_tier == 'tier1' %}
                      üî• TIER 1 CONFIRMATION
                      {% else %}
                      ‚ö° TIER 2 CONFIRMATION
                      {% endif %}
                    </div>
                    {% if item.multi_signal_explanation %}
                    <div style="color: #92400e; font-size: 13px; margin-bottom: 10px;">
                      <strong>Signal Combination:</strong> {{ item.multi_signal_explanation }}
                    </div>
                    {% endif %}

                    <!-- Politician Details -->
                    {% if item.politician_details and item.politician_details|length > 0 %}
                    <div style="margin-top: 10px;">
                      <div style="font-size: 11px; color: #92400e; font-weight: 600; margin-bottom: 5px;">
                        üèõÔ∏è POLITICIAN TRADING ({{ item.politician_count }} politician{{ 's' if item.politician_count != 1 else '' }}):
                      </div>
                      <div style="color: #92400e; font-size: 12px; line-height: 1.6;">
                        {% for detail in item.politician_details %}
                        ‚Ä¢ {{ detail }}<br>
                        {% endfor %}
                      </div>
                    </div>
                    {% endif %}

                    <!-- Institutional Details -->
                    {% if item.institutional_details and item.institutional_details|length > 0 %}
                    <div style="margin-top: 10px;">
                      <div style="font-size: 11px; color: #92400e; font-weight: 600; margin-bottom: 5px;">
                        üè¶ INSTITUTIONAL HOLDERS - 13F ({{ item.institutional_count }} priority fund{{ 's' if item.institutional_count != 1 else '' }}):
                      </div>
                      <div style="color: #92400e; font-size: 12px; line-height: 1.6;">
                        {% for detail in item.institutional_details %}
                        ‚Ä¢ {{ detail }}<br>
                        {% endfor %}
                        {% if item.institutional_count > 10 %}
                        <em style="font-size: 11px;">...and {{ item.institutional_count - 10 }} more priority institutions</em>
                        {% endif %}
                      </div>
                    </div>
                    {% endif %}
                  </td>
                </tr>
              </table>
              {% endif %}

              <!-- Insiders Section -->
              <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 5px; margin: 15px 0;">
                <tr>
                  <td style="padding: 12px;">
                    <div style="font-size: 12px; color: #856404; font-weight: 600; margin-bottom: 5px;">üë• INSIDERS BUYING</div>
                    <div style="color: #856404; font-size: 14px;">
                      {% if item.insiders_with_track_record and item.insiders_with_track_record != '' %}
                        {{ item.insiders_with_track_record }}
                      {% else %}
                        {{ item.insiders }}
                      {% endif %}
                    </div>
                  </td>
                </tr>
              </table>

              <!-- Short Interest Section -->
              {% if item.short_interest_available and (item.squeeze_potential or (item.short_percent_float and item.short_percent_float >= 0.15)) %}
              <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background: {% if item.squeeze_potential %}#ffebee{% else %}#fce4ec{% endif %}; border-left: 4px solid {% if item.squeeze_potential %}#ff5722{% else %}#c2185b{% endif %}; border-radius: 5px; margin: 15px 0;">
                <tr>
                  <td style="padding: 12px;">
                    <div style="font-size: 12px; color: {% if item.squeeze_potential %}#bf360c{% else %}#880e4f{% endif %}; font-weight: 600; margin-bottom: 8px;">
                      {% if item.squeeze_potential %}
                      üöÄ SHORT SQUEEZE POTENTIAL
                      {% else %}
                      üìä HIGH SHORT INTEREST DETECTED
                      {% endif %}
                    </div>
                    <div style="color: {% if item.squeeze_potential %}#bf360c{% else %}#880e4f{% endif %}; font-size: 13px; line-height: 1.6;">
                      <strong>Short % of Float:</strong> {{ item.short_percent_float_display }}<br>
                      {% if item.days_to_cover and item.days_to_cover > 0 %}
                      <strong>Days to Cover:</strong> {{ item.days_to_cover_display }} days<br>
                      {% endif %}
                      {% if item.squeeze_potential %}
                      <strong>Squeeze Score:</strong> {{ item.squeeze_score|round(1) }}/100 - High squeeze potential!<br>
                      {% endif %}
                      {% if item.conviction_adjustment_reason and item.conviction_adjustment_reason != 'No short interest data available' %}
                      <em style="font-size: 12px;">{{ item.conviction_adjustment_reason }}</em>
                      {% endif %}
                    </div>
                  </td>
                </tr>
              </table>
              {% endif %}

              <!-- Signal Metrics -->
              <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 15px 0;">
                <tr>
                  <td width="50%" style="padding-right: 7px;">
                    <table width="100%" cellpadding="12" cellspacing="0" border="0" style="background: #f8f9fa; border-radius: 5px;">
                      <tr>
                        <td>
                          <div style="font-size: 11px; color: #666; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 5px;">Cluster Size</div>
                          <div style="font-size: 18px; font-weight: 600; color: #333;">{{ item.cluster_count }} insiders</div>
                        </td>
                      </tr>
                    </table>
                  </td>
                  <td width="50%" style="padding-left: 7px;">
                    <table width="100%" cellpadding="12" cellspacing="0" border="0" style="background: #f8f9fa; border-radius: 5px;">
                      <tr>
                        <td>
                          <div style="font-size: 11px; color: #666; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 5px;">Total Purchased</div>
                          <div style="font-size: 18px; font-weight: 600; color: #333;">
                            {% if item.total_value >= 1000000 %}
                              ${{ "{:.1f}".format(item.total_value/1000000) }}M
                            {% elif item.total_value >= 1000 %}
                              ${{ "{:.1f}".format(item.total_value/1000) }}K
                            {% else %}
                              ${{ "{:,.0f}".format(item.total_value) }}
                            {% endif %}
                          </div>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
                <tr>
                  <td width="50%" style="padding-right: 7px; padding-top: 15px;">
                    <table width="100%" cellpadding="12" cellspacing="0" border="0" style="background: #f8f9fa; border-radius: 5px;">
                      <tr>
                        <td>
                          <div style="font-size: 11px; color: #666; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 5px;">Conviction Score</div>
                          <div style="font-size: 18px; font-weight: 600; color: #333;">{{ item.avg_conviction|round(2) }}</div>
                        </td>
                      </tr>
                    </table>
                  </td>
                  <td width="50%" style="padding-left: 7px; padding-top: 15px;">
                    <table width="100%" cellpadding="12" cellspacing="0" border="0" style="background: #f8f9fa; border-radius: 5px;">
                      <tr>
                        <td>
                          <div style="font-size: 11px; color: #666; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 5px;">Last Trade</div>
                          <div style="font-size: 18px; font-weight: 600; color: #333;">{{ item.last_trade_date.strftime('%b %d') if item.last_trade_date else 'Recent' }}</div>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>

              <!-- Price Info -->
              {% if item.currentPrice %}
              <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 10px 0;">
                <tr>
                  <td width="50%" style="padding: 5px;">
                    <table width="100%" cellpadding="0" cellspacing="0" border="0">
                      <tr>
                        <td>
                          <span style="font-size: 16px;">üí∞</span>
                          <span style="font-size: 13px; color: #666; margin: 0 5px;">Current Price:</span>
                          <span style="font-weight: 600; color: #333; font-size: 13px;">${{ item.currentPrice|round(2) }}</span>
                        </td>
                      </tr>
                    </table>
                  </td>
                  {% if item.pct_from_52wk_low %}
                  <td width="50%" style="padding: 5px;">
                    <table width="100%" cellpadding="0" cellspacing="0" border="0">
                      <tr>
                        <td>
                          <span style="font-size: 16px;">üìä</span>
                          <span style="font-size: 13px; color: #666; margin: 0 5px;">From 52w Low:</span>
                          <span style="font-weight: 600; color: #333; font-size: 13px;">+{{ item.pct_from_52wk_low|round(1) }}%</span>
                        </td>
                      </tr>
                    </table>
                  </td>
                  {% endif %}
                </tr>
                {% if item.pct_of_float or item.marketCap %}
                <tr>
                  {% if item.marketCap %}
                  <td width="50%" style="padding: 5px;">
                    <table width="100%" cellpadding="0" cellspacing="0" border="0">
                      <tr>
                        <td>
                          <span style="font-size: 16px;">üè¢</span>
                          <span style="font-size: 13px; color: #666; margin: 0 5px;">Market Cap:</span>
                          <span style="font-weight: 600; color: #333; font-size: 13px;">
                            {% if item.marketCap >= 1_000_000_000 %}
                              ${{ "{:.1f}".format(item.marketCap/1_000_000_000) }}B
                            {% elif item.marketCap >= 1_000_000 %}
                              ${{ "{:.0f}".format(item.marketCap/1_000_000) }}M
                            {% else %}
                              ${{ "{:,.0f}".format(item.marketCap) }}
                            {% endif %}
                          </span>
                        </td>
                      </tr>
                    </table>
                  </td>
                  {% endif %}
                  {% if item.pct_of_float %}
                  <td width="50%" style="padding: 5px;">
                    <table width="100%" cellpadding="0" cellspacing="0" border="0">
                      <tr>
                        <td>
                          <span style="font-size: 16px;">
                            {% if item.pct_of_float >= 1.0 %}üî•{% elif item.pct_of_float >= 0.1 %}‚ö°{% else %}üíé{% endif %}
                          </span>
                          <span style="font-size: 13px; color: #666; margin: 0 5px;">% of Float:</span>
                          <span style="font-weight: 600;
                            {% if item.pct_of_float >= 1.0 %}color: #c62828;
                            {% elif item.pct_of_float >= 0.1 %}color: #e65100;
                            {% else %}color: #333;{% endif %}
                            font-size: 13px;">
                            {% if item.pct_of_float >= 0.01 %}
                              {{ "{:.3f}".format(item.pct_of_float) }}%
                            {% else %}
                              {{ "{:.4f}".format(item.pct_of_float) }}%
                            {% endif %}
                          </span>
                        </td>
                      </tr>
                    </table>
                  </td>
                  {% endif %}
                </tr>
                {% endif %}
              </table>
              {% endif %}

              <!-- Action Box -->
              <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background: #e3f2fd; border-left: 4px solid #2196f3; border-radius: 5px; margin: 15px 0;">
                <tr>
                  <td style="padding: 15px;">
                    <div style="font-size: 12px; color: #1565c0; font-weight: 600; text-transform: uppercase; margin-bottom: 5px;">üìå Suggested Action</div>
                    <div style="color: #1565c0; font-size: 14px; font-weight: 500;">{{ item.suggested_action }}</div>
                  </td>
                </tr>
              </table>

              <!-- Rationale -->
              <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background: #f8f9fa; border-radius: 5px; margin-top: 10px;">
                <tr>
                  <td style="padding: 12px;">
                    <div style="font-size: 13px; color: #555;">
                      <strong>Rationale:</strong> {{ item.rationale }}
                    </div>
                  </td>
                </tr>
              </table>

            </td>
          </tr>
        </table>

        {% if not loop.last %}
        <div style="height: 1px; background: #e0e0e0; margin: 30px 0;"></div>
        {% endif %}
        {% endfor %}
      </td>
    </tr>

    <!-- Footer -->
    <tr>
      <td style="background: #f8f9fa; padding: 20px; text-align: center; color: #666; font-size: 12px; border-top: 1px solid #e0e0e0;">
        <p style="margin: 5px 0;"><strong>Insider Cluster Watch - Enhanced Edition</strong></p>
        <p style="margin: 5px 0;">Data sourced from public SEC Form 4 filings via OpenInsider & SEC EDGAR</p>
        <p style="margin: 10px 0 5px 0;"><em>This report is for informational purposes only. Always conduct your own research before making investment decisions.</em></p>
      </td>
    </tr>

  </table>
</body>
</html>